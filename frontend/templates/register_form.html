<!-- templates/register_form.html -->

{% extends 'base.html' %}

{% block title %}Registro de Usuario{% endblock %}

{% block content %}
  <div class="container" style="max-width: 500px; margin-top: 20px;">
    <h1>Registro de Usuario</h1>
    <form method="post" action="/users/api/register/">
      {% csrf_token %}

      <!-- Username -->
      <div class="form-group">
        <label for="username">Nombre de Usuario</label>
        <input type="text" id="username" name="username" class="form-control"
               value="{{ request.POST.username }}" required>
        {% if errores.username %}
          <small class="text-danger">{{ errores.username.0 }}</small>
        {% endif %}
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Correo Electrónico</label>
        <input type="email" id="email" name="email" class="form-control"
               value="{{ request.POST.email }}" required>
        {% if errores.email %}
          <small class="text-danger">{{ errores.email.0 }}</small>
        {% endif %}
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" name="password" class="form-control" required>
        {% if errores.password %}
          <small class="text-danger">{{ errores.password.0 }}</small>
        {% endif %}
      </div>

      <!-- Password2 -->
      <div class="form-group">
        <label for="password2">Repetir Contraseña</label>
        <input type="password" id="password2" name="password2" class="form-control" required>
        {% if errores.password2 %}
          <small class="text-danger">{{ errores.password2.0 }}</small>
        {% endif %}
      </div>
      
      <!-- Rol -->
      <div class="form-group">
        <label for="rol">Rol</label>
        <select id="rol" name="rol" class="form-control" required>
          <option value="">-- Selecciona un rol --</option>
          {% for r in roles %}
            <option value="{{ r.nombre }}" {% if request.POST.rol == r.nombre %}selected{% endif %}>
              {{ r.nombre }}
            </option>
          {% endfor %}
        </select>
        {% if errores.rol %}
          <small class="text-danger">{{ errores.rol.0 }}</small>
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary">Registrarme</button>
    </form>
  </div>
{% endblock %}
